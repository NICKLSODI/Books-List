(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function I(){}function x(t){return t()}function R(){return Object.create(null)}function S(t){t.forEach(x)}function tt(t){return typeof t=="function"}function nt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}function a(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function lt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function O(){return $(" ")}function j(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function B(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function rt(t){return Array.from(t.childNodes)}function z(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function J(t,e){t.value=e==null?"":e}let M;function F(t){M=t}function it(){if(!M)throw new Error("Function called outside component initialization");return M}function ut(t){it().$$.on_mount.push(t)}const P=[],V=[],q=[],W=[],st=Promise.resolve();let Y=!1;function ft(){Y||(Y=!0,st.then(et))}function G(t){q.push(t)}const K=new Set;let U=0;function et(){const t=M;do{for(;U<P.length;){const e=P[U];U++,F(e),ct(e.$$)}for(F(null),P.length=0,U=0;V.length;)V.pop()();for(let e=0;e<q.length;e+=1){const n=q[e];K.has(n)||(K.add(n),n())}q.length=0}while(P.length);for(;W.length;)W.pop()();Y=!1,K.clear(),F(t)}function ct(t){if(t.fragment!==null){t.update(),S(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(G)}}const at=new Set;function dt(t,e){t&&t.i&&(at.delete(t),t.i(e))}function pt(t,e,n,r){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),r||G(()=>{const u=t.$$.on_mount.map(x).filter(tt);t.$$.on_destroy?t.$$.on_destroy.push(...u):S(u),t.$$.on_mount=[]}),i.forEach(G)}function ht(t,e){const n=t.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _t(t,e){t.$$.dirty[0]===-1&&(P.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(t,e,n,r,o,i,u,p=[-1]){const c=M;F(t);const f=t.$$={fragment:null,ctx:[],props:i,update:I,not_equal:o,bound:R(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:R(),dirty:p,skip_bound:!1,root:e.target||c.$$.root};u&&u(f.root);let g=!1;if(f.ctx=n?n(t,e.props||{},(h,d,...k)=>{const w=k.length?k[0]:d;return f.ctx&&o(f.ctx[h],f.ctx[h]=w)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](w),g&&_t(t,h)),d}):[],f.update(),g=!0,S(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const h=rt(e.target);f.fragment&&f.fragment.l(h),h.forEach(N)}else f.fragment&&f.fragment.c();e.intro&&dt(t.$$.fragment),pt(t,e.target,e.anchor,e.customElement),et()}F(c)}class gt{$destroy(){ht(this,1),this.$destroy=I}$on(e,n){if(!tt(n))return I;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function X(t,e,n){const r=t.slice();return r[14]=e[n],r}function Z(t){let e,n,r,o,i,u=t[14].title+"",p,c,f=t[14].author+"",g,h,d,k;function w(){return t[11](t[14])}function C(){return t[12](t[14])}return{c(){e=v("div"),n=v("input"),r=O(),o=v("button"),o.textContent="x",i=O(),p=$(u),c=$("("),g=$(f),h=$(")"),B(n,"type","radio"),B(n,"id","po"),B(o,"id","")},m(E,s){L(E,e,s),a(e,n),a(e,r),a(e,o),a(e,i),a(e,p),a(e,c),a(e,g),a(e,h),d||(k=[j(n,"click",w),j(o,"click",C)],d=!0)},p(E,s){t=E,s&1&&u!==(u=t[14].title+"")&&z(p,u),s&1&&f!==(f=t[14].author+"")&&z(g,f)},d(E){E&&N(e),d=!1,S(k)}}}function bt(t){let e,n,r,o,i,u,p,c,f,g,h,d,k,w,C,E,s,y,A,D,H,T=t[0],b=[];for(let l=0;l<T.length;l+=1)b[l]=Z(X(t,T,l));return{c(){e=v("h1"),e.textContent="Add Your Favorite Books",n=O(),r=v("div"),o=v("input"),i=O(),u=v("input"),p=O(),c=v("button"),f=$("Create"),h=O(),d=v("button"),k=$("Update "),w=$(t[3]),E=O();for(let l=0;l<b.length;l+=1)b[l].c();s=O(),y=v("div"),A=$(t[4]),B(o,"placeholder","Title"),B(u,"placeholder","Author"),c.disabled=g=!t[1]||!t[2],d.disabled=C=!t[1]||!t[2]||t[3]==0},m(l,_){L(l,e,_),L(l,n,_),L(l,r,_),a(r,o),J(o,t[1]),a(r,i),a(r,u),J(u,t[2]),a(r,p),a(r,c),a(c,f),a(r,h),a(r,d),a(d,k),a(d,w),L(l,E,_);for(let m=0;m<b.length;m+=1)b[m].m(l,_);L(l,s,_),L(l,y,_),a(y,A),D||(H=[j(o,"input",t[9]),j(u,"input",t[10]),j(c,"click",t[5]),j(d,"click",t[7])],D=!0)},p(l,[_]){if(_&2&&o.value!==l[1]&&J(o,l[1]),_&4&&u.value!==l[2]&&J(u,l[2]),_&6&&g!==(g=!l[1]||!l[2])&&(c.disabled=g),_&8&&z(w,l[3]),_&14&&C!==(C=!l[1]||!l[2]||l[3]==0)&&(d.disabled=C),_&321){T=l[0];let m;for(m=0;m<T.length;m+=1){const Q=X(l,T,m);b[m]?b[m].p(Q,_):(b[m]=Z(Q),b[m].c(),b[m].m(s.parentNode,s))}for(;m<b.length;m+=1)b[m].d(1);b.length=T.length}_&16&&z(A,l[4])},i:I,o:I,d(l){l&&N(e),l&&N(n),l&&N(r),l&&N(E),lt(b,l),l&&N(s),l&&N(y),D=!1,S(H)}}}function yt(t,e,n){let r=[],o="",i="",u=0,p="";ut(c);async function c(){const s=await fetch("http://localhost:3000/posts");n(0,r=await s.json()),s.status!=200&&n(4,p="Can not load post list")}async function f(){console.log({title:o,author:i});const s=await fetch("http://localhost:3000/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o,author:i})});if(!s.ok){n(4,p="create user fail "+s.status);return}c()}async function g(s){const y=await fetch("http://localhost:3000/posts/"+s,{method:"DELETE"});if(y.ok){n(3,u=0),n(4,p="");const A=document.getElementById("po");A.checked=!1}else{n(4,p="delete user fail "+y.status);return}c()}async function h(){const s=await fetch("http://localhost:3000/posts/"+u,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o,author:i})});if(!s.ok){n(4,p="update user fail "+s.status);return}c()}async function d(s){let y=r.find(A=>A.id==s);y&&(n(3,u=y.id),n(1,o=y.title),n(2,i=y.author),n(4,p=`Post ${u} selected`))}function k(){o=this.value,n(1,o)}function w(){i=this.value,n(2,i)}return[r,o,i,u,p,f,g,h,d,k,w,s=>d(s.id),s=>g(s.id)]}class kt extends gt{constructor(e){super(),mt(this,e,yt,bt,nt,{})}}new kt({target:document.getElementById("app")});
